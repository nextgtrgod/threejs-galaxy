import{S as z,P as L,O as S,W as I,B as W,C as b,a as y,b as F,A as O,c as B,G as E}from"./vendor.c9819c51.js";const G=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))u(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&u(s)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function u(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}};G();const e={count:1e5,size:.01,radius:10,branches:9,spin:1,randomness:1.55,randomnessPower:4.75,innerColor:"#ff5555",outerColor:"#55f5ff"};let c=window.innerWidth,l=window.innerHeight,x=parseInt(new URL(document.location).searchParams.get("dpr"))||window.devicePixelRatio,P=0;const R=2*Math.PI;let h=null,f=null,d=null,C=0;class k{constructor({canvas:t}){this.canvas=t,this.init(),this.generate()}init(){this.scene=new z,this.camera=new L(75,c/l,1,100),this.camera.position.x=3,this.camera.position.y=2,this.camera.position.z=5,this.scene.add(this.camera),this.controls=new S(this.camera,this.canvas),this.controls.minDistance=5,this.controls.maxDistance=20,this.controls.enableDamping=!0,this.renderer=new I({canvas:this.canvas,antialias:!0,powerPreference:"high-performance"}),this.renderer.setSize(c,l),this.renderer.setPixelRatio(x),window.addEventListener("resize",this.setSize.bind(this))}setSize(){c=window.innerWidth,l=window.innerHeight,this.camera.aspect=c/l,this.camera.updateProjectionMatrix(),this.renderer.setSize(c,l),this.renderer.setPixelRatio(x)}generate(){d!==null&&(h.dispose(),f.dispose(),this.scene.remove(d)),h=new W;const t=new Float32Array(e.count*3),i=new Float32Array(e.count*3),u=new b(e.innerColor),n=new b(e.outerColor);for(let r=0;r<e.count;r++){const s=r*3,a=Math.random()*e.radius,w=a*e.spin,g=r%e.branches/e.branches*R,v=Math.pow(Math.random(),e.randomnessPower)*(Math.random()<.5?1:-1)*e.randomness*a,M=Math.pow(Math.random(),e.randomnessPower)*(Math.random()<.5?1:-1)*e.randomness*a,A=Math.pow(Math.random(),e.randomnessPower)*(Math.random()<.5?1:-1)*e.randomness*a;t[s+0]=Math.cos(g+w)*a+v,t[s+1]=M,t[s+2]=Math.sin(g+w)*a+A;const p=u.clone();p.lerp(n,a/e.radius),i[s+0]=p.r,i[s+1]=p.g,i[s+2]=p.b}h.setAttribute("position",new y(t,3)),h.setAttribute("color",new y(i,3)),f=new F({size:e.size,sizeAttenuation:!0,depthWrite:!1,blending:O,vertexColors:!0}),d=new B(h,f),this.scene.add(d)}animate(){P=requestAnimationFrame(this.animate.bind(this)),d&&(d.rotation.y=C*.0012),this.draw(),C++}draw(){this.controls.update(),this.renderer.render(this.scene,this.camera)}start(){this.animate()}stop(){cancelAnimationFrame(P)}restart(){this.stop(),this.generate(),this.start()}}let D=({onFinishChange:o}={})=>{let t=new E;return t.add(e,"count").min(1e3).max(1e6).step(100),t.add(e,"size").min(.001).max(.1).step(.001),t.add(e,"radius").min(.01).max(20).step(.01),t.add(e,"branches").min(2).max(20).step(1),t.add(e,"spin").min(-5).max(5).step(.001),t.add(e,"randomness").min(0).max(2).step(.001),t.add(e,"randomnessPower").min(1).max(10).step(.001),t.addColor(e,"innerColor"),t.addColor(e,"outerColor"),o&&t.controllers.forEach(i=>{i.onFinishChange(o)}),t},H=(()=>{try{return window.self!==window.top}catch{return!0}})(),N=document.getElementById("scene"),m=new k({canvas:N});if(H){document.body.classList.add("is-iframe"),m.draw();let o=["http://localhost:8080","https://nextgtrgod.github.io","https://nextgtrgod-experiments.vercel.app"];window.addEventListener("message",t=>{if(!!o.includes(t.origin))switch(t.data){case"start":m.start();break;case"stop":m.stop();break}})}else m.start(),window.innerWidth>=720&&D({onFinishChange:()=>m.restart()});
